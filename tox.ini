[tox]
envlist = {py27,py33,py34,py35,py36}, docs, flake
skip_missing_interpreters=True

[base]
deps = -r{toxinidir}/requirements.txt

[testenv:py{27,33,34,35,36}]
sitepackages = False
recreate = True
basepython =
    py27: python2.7
    py33: python3.3
    py34: python3.4
    py35: python3.5
    py36: python3.6
deps =
	coverage>=4.4
	py36: ruamel.yaml>=0.14.12
    {[base]deps}
commands =
	coverage -p -m unittest tests.test_basic tests.test_html tests.test_salt tests.test_strings tests.test_utils tests.test_rand tests.test_config tests.test_usage tests.test_pocket
	coverage combine 2>/dev/null || true
	coverage report --include=piaplib* 2>/dev/null || true
	codecov 2>/dev/null || true

[testenv:flake]
basepython =
    flake: python3
deps =
	flake: flake8>=2.5.4
	pyflakes>=1.1.0
	pep8>=1.7.0
    {[base]deps}
commands = flake8 --ignore=W191,W391 --max-line-length=100 --count

